\documentclass[10pt,letterpaper]{article}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage[english]{babel}
\usepackage{breakurl}
\usepackage[superscript]{cite}
\usepackage{fancyhdr}
\usepackage{float}
\usepackage[margin=1in]{geometry}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage[utf8]{inputenc}
\usepackage{makeidx}
\usepackage{multicol}
\usepackage{nth}
\usepackage{longtable}

% Use Helvetica
\usepackage[scaled]{helvet}
\renewcommand\familydefault{\sfdefault} 
\usepackage[T1]{fontenc}

\usepackage{setspace}
\usepackage{siunitx}
\usepackage{svg}
\usepackage{subcaption}
\usepackage{tikz}
\usepackage{titling}
\usepackage{url}
\usepackage{kantlipsum}
\usepackage{enumitem}

\usepackage{parskip} % Paragraph skip - adds extra lineskip spacing
\setlength{\parskip}{0.7\baselineskip plus 2pt}

% Custom definitions
\newcommand{\doctitle}{Requirements Specification}
\newcommand{\docsubtitle}{\input{../common/title}}

% Custom commands
\newcommand{\ts}{\textsubscript}	% Subscript command %

% Use hyphans to break up urls
\def\UrlBreaks{\do\/\do-}

% PDF and href setup
% Hyper ref
\hypersetup{
	colorlinks=true,
	citecolor=black,
	linkcolor=black,
	filecolor=black,
	urlcolor=blue,
	pdftitle={\@title},
	bookmarks=true
}
\urlstyle{same}

% Page headings
\pagestyle{fancy}
\fancyhead[L]{\MakeUppercase{CPEN/ELEC 491}}
\fancyhead[R]{\textbf{Team 109}}
\fancyfoot{}
\fancyfoot[C]{\thepage}

% No paragraph indent
\parindent 0ex

% Meta
\author{
	Deutsch, Peter &
	\textit{me@peterdeutsch.ca}
	\\
	He, Muchen &
	\textit{i@muchen.ca}
	\\
	Hsueh, Arthur &
	\textit{ah11962@outlook.com}
	\\
	Wang, Meng &
	\textit{wzfftxwd@gmail.com}
	\\
	Wilson, Ardell &
	\textit{ardellw96@gmail.com}
}
\title{\doctitle}
\date{\today}

\makeatletter
\renewcommand{\maketitle}{
	\bgroup
	\setlength{\parindent}{0pt}
	\begin{flushleft}
		% Top spacing
		\vspace*{0.75in}

		% Team logo
		\includegraphics[scale=0.5]{../assets/capstonelogo1.png}
		\vspace*{0.25in}

		% Title
		\textbf{\Huge{\@title}}\\
		\hrulefill

		% Subtitle
		\textbf{\huge{\docsubtitle}}
		
		\vspace*{0.5in}

		% Course number and team
		\textbf{\Large{CPEN/ELEC 491 Capstone Team 109}}\\
		\hspace*{0.1cm}
		\begin{tabular}[h]{|ll}
			\@author
		\end{tabular}

		\vspace*{0.25in}

		\textbf{Website}: https://capstone-skynet.github.io

		\vfill

		% Logo
		\hspace*{-0.3cm}\includegraphics[scale=0.5]{../assets/ece_logo.pdf}

		% Date
		\large{\@date}
	\end{flushleft}
	\egroup
}
\makeatother

% Begin Document
\begin{document}

% Title Page
\begin{titlepage}
	\maketitle
\end{titlepage}

% Revision history
\include{rev_history}

% Table of contents
\include{toc}

% Terms and Abbreviations
\include{terms_and_abbreviations}

% List of figures and tables
\thispagestyle{empty}
\listoffigures
\listoftables
\newpage

% Set page and section counter
\setcounter{page}{1}

% Begin content
\section{About This Document}\label{section:about}
\subsection{Purpose}\label{section:about:purpose}
This document outlines the project's requirements, laying out a basis of what is required for the project to be deemed \textit{successful}. In particular, this document outlines expected metrics related to performance, quality, longevity, environmental impact, cost, legality, and safety.

\subsection{Intended Audiences}\label{section:about:audience}
This document is intended for \textit{all project stakeholders}, including (but not limited to):
\begin{itemize}
\item Project Designers and Quality Controllers (the Capstone team)
\item Client (and their representatives)
\item External Project Sponsors
\item Legal Personnel (The Department of Electrical and Computer Engineering, Industry Canada, Transport Canada)
\end{itemize}

\subsection{Reading Guide}\label{section:about:readingguide}
This document describes both a high-level description of the project, in addition to detailed functional requirements, non-functional requirements, and constraints. Each detailed requirement listed in this document is assigned a unique \textit{requirement identifier}, which can be cross-referenced to other project documents (mainly the Design Specification). 

\section{Background}

% 
% Describes the importance of a flying FPGA ML thing to the client (Mieszko).
% 

TODO: A nice high-level pictogram (\textit{not} a block diagram, that's for the design doc) would be great here.

\section{Domain}

The project is classified as an integration of consumer electronics with components intended to be used in research and industry. In particular, specific sub-domains of this project include FPGA design, hardware acceleration, machine learning, and video acquisition/transmission. 

\section{Goal}

This project aims to offer am aerial/drone platform which provides both video acquisition and supplemental programmable hardware processing capabilities on-board -- customizable to a wide range of video applications that require hardware acceleration. Current products on the market are primarily aimed at the consumers and ``prosumers'' -- content-producers whose main focus in aerial photography/videography. While our project also features aerial photography, its emphasis is in performing real-time analytics using the captured video, in addition to supplying custom features and modifications tailored to our client.

\section{Functional Requirements}\label{section:funcreq}

This section outlines the functional requirements of the integrated system.

Functional requirements describes what the project do. It embodies the essential requirements that must be completed in order for the project to be deemed deliverable or successful. The functional requirements include the scope of business rules, legal or regulatory requirements, certification requirements, and external interfacing requirements for the project.

\subsection{High-Level Requirements}
\begin{enumerate}[label=F.HL.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
    \item Computing Platform must perform hardware-accelerated machine-learning.
    \item Computing Platform must be mounted on a drone capable of sustained flight.
    \item Machine Learning Implementation must implement a novel video processing use-case, such as object detection.
\end{enumerate}

\subsection{Multirotor RPAS}
\begin{enumerate}[label=F.DR.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
	\item The multirotor RPAS must lift-off from the ground on its own power without a wired connection.
	\item The multirotor RPAS must remain in a self-stabilizing hover using its onboard flight controller and PID systems without human intervention.
	\item The multirotor RPAS must be paired with a radio transmitter (TX) for pilot control.
	\item The multirotor RPAS must be controlled by a pilot within the visual line-of-sight (VLOS).
	\item The multirotor RPAS must ascend, descend, pitch, roll, and yaw upon pilot's commands via the TX to the RPAS receiver (RX).
	\item The multirotor RPAS must output adequate lift thrust to carry the computing platform.
	\item The multirotor RPAS must be equipped with LEDs to indicate the orientation of the RPAS.
	\item The multirotor RPAS must be equipped with easy-to-remove propeller fasteners.
	\item The multirotor RPAS must be equipped low-battery warning system.
	\item The multirotor RPAS must perform an autonomous controlled emergency landing in the case of loss of contact with pilot's TX.
	\item The multirotor RPAS must be in manufacturer compliance with Transport Canada's definition of RPAS\cite{tp15263}.
	\item The multirotor RPAS must be registered under Transport Canada drone registry.\cite{tcdronereg}.
	\item The multirotor RPAS must be operable under norminal weather conditions.
	\item The multirotor RPAS must be constructed and reparable using standard, non-propriatary components, fasteners, and connectors.
	\item The multirotor RPAS must have landing legs or landing pads to protect the onboard equipment and dampen the impact upon landing/touch-down, emergency landing, and crash-landing.
\end{enumerate}

\subsection{Non-RPAS Air-Ground I/O}
\begin{enumerate}[label=F.CM.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
	\item Computation platform transmits video data and ML model data to ground station.
\end{enumerate}

\subsection{Computing Platform}
\begin{enumerate}[label=F.CP.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
	\item Computing Platform must contain at least 1MB of non-volatile memory to store machine learning weights.
	\item Interface with the FPGA must be capable of bitrates sufficient for video streaming (>1.5Mbps)
	\item Computing Platform must have a physical method (ex. button) to signal a safe power-off sequence for onboard components.
\end{enumerate}

\subsection{Machine Learning Implementation}
\begin{enumerate}[label=F.ML.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
	\item A machine learning model, implemented on the FPGA, is capable of detecting pedestrians from image frames. captured using the camera.
	\item The machine learning model's processing latency is one second or less.
\end{enumerate}

\subsubsection{Base Station}
\begin{enumerate}[label=F.BS.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
    \item Ground station displays the video data overlaid with the ML model data.
	\item ML model data is presented in the form of bounding boxes.
\end{enumerate}

\section{Non-Functional Requirements}\label{section:nonfuncrec}

\subsection{Computing Platform}
\begin{enumerate}[label=NF.CP.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
	\item Computing Platform must be capable of performing a power-on self-test (POST) to ensure communications and video links are established
	\item Computing Platform must keep its configuration across flight sessions, including if the battery has been detached
\end{enumerate}

\subsection{Multirotor RPAS}
\begin{enumerate}[label=NF.DR.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
	\item The multirotor RPAS must be able to carry a maximum payload mass of 2.0 kg and achieve flight.
	\item The multirotor RPAS maximum take off mass including the payload must be less than 25.0 kg in compliance with Transport Canada TC-15263.\cite{tp15263}
	\item The multirotor RPAS must withstand at least 5 nautical miles (knots) of crosswind during operation.
	\item The multirotor RPAS must receive pilot TX control signals via 2.4 GHz radio from 300 m away.
	\item The multirotor RPAS onboard LEDs must be clearly visible from 300 m away and must clearly indicate the orientation of the RPAS.
	\item The multirotor RPAS flight controllers systems must respond to pilot controls with less than 100ms of latency.
	\item The multirotor RPAS must have a hovering flight duration of 30 minutes with 1.0 kg of payload.
	\item The brushless DC (BLDC) motors must have a kV constant between 800 and 1200.
	\item The BLDC motors and propellers must output at least 8,000 N of thrust at maximum throttle.
	\item The BLDC motors and propellers must have an optimal efficiency of at least 50 N/W when the RPAS is hovering, a typical mode of operation.
	\item The BLDC motors and propellers must have a combined mass of less than 100g.
	\item The electronic speed controller (ESC) for controlling BLDC motor speeds must have maximum current output of 30 A.
	\item The ESC must not exceed operating temperature of 60 degrees Celsius at maximum load operation.
	\item The ESC must operate at maximum load --- at 90\% of the maximum current draw --- for 60 seconds.
	\item The multirotor RPAS battery must be a high-power-output Lithium Polymer (LiPo) battery with 5000 mAh to 6000 mAh capacity and discharge rating of at least 30 C to 40 C.
	\item The multirotor RPAS battery capacity must not exceed 6700 mAh.
	\item The LiPo batteries must retain 75\% of its initial maximum capacity after 200 charge-discharge cycles.\cite{lipobattery}
	\item The low-battery warning system must trigger the flight controller to enter an emergency landing protocol when battery is at or below 5\% of the total charge capacity.
	\item The flight controller must automatically enter emergency landing protocol when pilot radio control feed has been cut for more than 1.0 seconds with a maximum descend rate of 0.5 m/s.
	\item The multirotor RPAS airframe mass must not exceed 400 g.
	\item The multirotor RPAS airframe opposite motor-to-motor distance must be 450 mm for 4-engine multirotor or 650mm for 6-engine multimotor.
\end{enumerate}

\section{Contraints}

% Constraints are not part of functional or non-function specifications.

\subsection{Cost}
\begin{enumerate}[label=C.CT.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
    \item Total cost of the project should be below C\$1,000, with C\$650 provided by the Capstone course as a backup.
    \item Operating cost of the integrated drone system upon completion should be practically free (non-including electricity cost, cost of time and labour, opportunity cost of the client, and cost for transportation).
\end{enumerate}

\subsection{Platform Extensibility}
\begin{enumerate}[label=C.EX.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
    \item FPGA must contain at least 60,000 logic elements to provide sufficient on-chip capacity for initial and future machine learning implementations.
    \item No more than 10,000 logic elements may be reserved for glue logic.
    \item I/O ports utilized on the Computing Platform must not be proprietary, to facilitate future board replacement.
    \item Development software used to synthesize the Computing Platform's hardware and software must be licensed and/or free-to-use, in perpetuity.
\end{enumerate}

\subsection{Legal Compliance}
\begin{enumerate}[label=C.LC.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
    \item Drone is in compliance with Transport Canada's new laws (TC 15263) with regards to small remote-piloted-aerial-systems (RPAS); effective as of June 1st, 2019.
    \item Provided drone documentation is in compliance with Transport Canada's regulations regarding drone manufacturers; documentation include safety, pre-flight, radio, operation, post-flight, and emergency procedures for the drone.
    \item Drone is not over 25kg and will not fly over bystanders (anyone that is not actively participating in the flight operation) or within 30m of them.
    \item Drone will not fly within 3 nautical miles of any aerodrome.
    \item Drone will not fly over 400ft; and not fly in controlled airspaces: class A, class B, class C, class D, class E, and class F.
    \item Drone will only fly in fair weather conditions with adequate visibility for line-of-sight operations.
    \item Drone will not carry weapons and cannot be used or modified for weaponization.
    \item Lithium batteries cannot be larger than 100Wh for it to be carried onto a commerial airplane. For a 4S cell battery (14.8 nomial voltage), this capacity is 6700 mAh.
\end{enumerate}

\subsection{Power Requirements}
\begin{enumerate}[label=C.PR.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
    \item The power supply must be able to output both 5V and 12V
    \item The power supply must be able to output at least 2A to the 5V system and 1A to the 12V system
    \item The power supply system should have overvoltage, undervoltage, surge and reverse polarity protection
    \item The power supply must be capable of supporting at least 10 minutes of continuous operation
\end{enumerate}

\subsection{Environmental Considerations}
\begin{enumerate}[label=C.EN.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
    \item Include a recycling plan for environmentally impactful components (i.e. LiPo batteries)
    \item Components must be RoHS compliant
    \item Drone must not be flown into areas from which it could not be recovered in the even of a failure (i.e. over deep water)
\end{enumerate}

\subsection{Manageability}
\begin{enumerate}[label=C.MG.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
    \item The battery must easily disconnect from the drone in order to enable easy charging
    \item The ground station must be able to easily connect to the drone
    \item It must be possible to connect to the FPGA and to synthesize hardware without removing it from the drone
\end{enumerate}

\subsection{Documents}
\begin{enumerate}[label=C.DD.\arabic*, wide=1cm, widest=3cm, leftmargin=*, font=\bfseries, noitemsep,topsep=0pt, parsep=4pt, partopsep=0pt]
    \item  The system must be accompanied by an operations manual describing procedures relating to; Safety, Operations and Maintenance
\end{enumerate}

% Bibliography
\clearpage
\addcontentsline{toc}{section}{References}
\bibliographystyle{ieeetr}
\bibliography{references}

% Appendix (uncomment to enable appendix)
% \clearpage
% \appendix
% \section{Appendix name}\label{appendix:sample-appendix}
% Content here

\end{document}
