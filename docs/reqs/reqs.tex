\documentclass[10pt,letterpaper]{article}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage[english]{babel}
\usepackage{breakurl}
\usepackage[superscript]{cite}
\usepackage{fancyhdr}
\usepackage{float}
\usepackage[margin=1in]{geometry}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage[utf8]{inputenc}
\usepackage{makeidx}
\usepackage{multicol}
\usepackage{nth}
\usepackage{longtable}

% Use Helvetica
\usepackage[scaled]{helvet}
\renewcommand\familydefault{\sfdefault} 
\usepackage[T1]{fontenc}

\usepackage{setspace}
\usepackage{siunitx}
\usepackage{svg}
\usepackage{subcaption}
\usepackage{tikz}
\usepackage{titling}
\usepackage{url}
\usepackage{kantlipsum}
\usepackage{enumerate}

\usepackage{parskip} % Paragraph skip - adds extra lineskip spacing
\setlength{\parskip}{0.7\baselineskip plus 2pt}

% Custom definitions
\newcommand{\doctitle}{Requirements Specification}
\newcommand{\docsubtitle}{\input{../common/title}}

% Custom commands
\newcommand{\ts}{\textsubscript}	% Subscript command %

% Use hyphans to break up urls
\def\UrlBreaks{\do\/\do-}

% PDF and href setup
% Hyper ref
\hypersetup{
	colorlinks=true,
	citecolor=black,
	linkcolor=black,
	filecolor=black,
	urlcolor=blue,
	pdftitle={\@title},
	bookmarks=true
}
\urlstyle{same}

% Page headings
\pagestyle{fancy}
\fancyhead[L]{\MakeUppercase{CPEN/ELEC 491}}
\fancyhead[R]{\textbf{Team 109}}
\fancyfoot{}
\fancyfoot[C]{\thepage}

% No paragraph indent
\parindent 0ex

% Meta
\author{
	Deutsch, Peter &
	\textit{me@peterdeutsch.ca}
	\\
	He, Muchen &
	\textit{i@muchen.ca}
	\\
	Hsueh, Arthur &
	\textit{ah11962@outlook.com}
	\\
	Wang, Meng &
	\textit{wzfftxwd@gmail.com}
	\\
	Wilson, Ardell &
	\textit{ardellw96@gmail.com}
}
\title{\doctitle}
\date{\today}

\makeatletter
\renewcommand{\maketitle}{
	\bgroup
	\setlength{\parindent}{0pt}
	\begin{flushleft}
		% Top spacing
		\vspace*{0.75in}

		% Team logo
		\includegraphics[scale=0.5]{../assets/capstonelogo1.png}
		\vspace*{0.25in}

		% Title
		\textbf{\Huge{\@title}}\\
		\hrulefill

		% Subtitle
		\textbf{\huge{\docsubtitle}}
		
		\vspace*{0.5in}

		% Course number and team
		\textbf{\Large{CPEN/ELEC 491 Capstone Team 109}}\\
		\hspace*{0.1cm}
		\begin{tabular}[h]{|ll}
			\@author
		\end{tabular}

		\vspace*{0.25in}

		\textbf{Website}: https://capstone-skynet.github.io

		\vfill

		% Logo
		\hspace*{-0.3cm}\includegraphics[scale=0.5]{../assets/ece_logo.pdf}

		% Date
		\large{\@date}
	\end{flushleft}
	\egroup
}
\makeatother

% Begin Document
\begin{document}

% Title Page
\begin{titlepage}
	\maketitle
\end{titlepage}

% Revision history
\include{rev_history}

% Table of contents
\include{toc}

% Terms and Abbreviations
\include{terms_and_abbreviations}

% List of figures and tables
\thispagestyle{empty}
\listoffigures
\listoftables
\newpage

% Set page and section counter
\setcounter{page}{1}

% Begin content
\section{About This Document}\label{section:about}
\subsection{Purpose}\label{section:about:purpose}
This document outlines the project's requirements, laying out a basis of what is required for the project to be deemed \textit{successful}. In particular, this document outlines expected metrics related to performance, quality, longevity, environmental impact, cost, legality, and safety.

\subsection{Intended Audiences}\label{section:about:audience}
This document is intended for \textit{all project stakeholders}, including (but not limited to):
\begin{itemize}
\item Project Designers and Quality Controllers (the Capstone team)
\item Client (and their representatives)
\item External Project Sponsors
\item Legal Personnel (The Department of Electrical and Computer Engineering, Industry Canada, Transport Canada)
\end{itemize}

\subsection{Reading Guide}\label{section:about:readingguide}
This document describes both a high-level description of the project, in addition to detailed functional requirements, non-functional requirements, and constraints. Each detailed requirement listed in this document is assigned a unique \textit{requirement identifier}, which can be cross-referenced to other project documents (mainly the Design Specification). 

\section{Background}

% 
% Describes the importance of a flying FPGA ML thing to the client (Mieszko).
% 

TODO: A nice high-level pictogram (\textit{not} a block diagram, that's for the design doc) would be great here.

\section{Domain}

The project is classified as an integration of consumer electronics with components intended to be used in research and industry. In particular, specific sub-domains of this project include FPGA design, hardware acceleration, machine learning, and video acquisition/transmission. 

\section{Goal}

This project aims to offer am aerial/drone platform which provides both video acquisition and supplemental programmable hardware processing capabilities on-board -- customizable to a wide range of video applications that require hardware acceleration. Current products on the market are primarily aimed at the consumers and ``prosumers'' -- content-producers whose main focus in aerial photography/videography. While our project also features aerial photography, its emphasis is in performing real-time analytics using the captured video, in addition to supplying custom features and modifications tailored to our client.

\section{Functional Requirements}\label{section:funcreq}

This section outlines the functional requirements of the integrated system.

Functional requirements describes what the project do. It embodies the essential requirements that must be completed in order for the project to be deemed deliverable or successful. The functional requirements include the scope of business rules, legal or regulatory requirements, certification requirements, and external interfacing requirements for the project.

\subsection{High-Level Requirements}
\begin{enumerate}[{NF.HL}.1:]
    \item Computing Platform must perform hardware-accelerated machine-learning.
    \item Computing Platform must be mounted on a drone capable of sustained flight.
    \item Machine Learning Implementation must implement a novel video processing use-case, such as object detection.
\end{enumerate}

\subsection{Multirotor RPAS}
\begin{enumerate}[{F.DR}.1:]
	\item Total takeoff mass of the drone with payload is less than 25kg
	\item Drone is self-stabilizing using its onboard flight controller.
	\item Drone is capable of being controlled by a pilot within line-of-sight.

\end{enumerate}

\subsection{Non-RPAS Air-Ground I/O}
\begin{enumerate}[{F.CM}.1:]
	\item Computation platform transmits video data and ML model data to ground station.
\end{enumerate}

\subsection{Computing Platform}
\begin{enumerate}[{F.CP}.1:]
	\item Computing Platform must contain at least 1MB of non-volatile memory to store machine learning weights.
	\item Interface with the FPGA must be capable of bitrates sufficient for video streaming (>1.5Mbps)
	\item Computing Platform must have a physical method (ex. button) to signal a safe power-off sequence for onboard components.
\end{enumerate}

\subsection{Machine Learning Implementation}
\begin{enumerate}[{F.ML}.1:]
\item A machine learning model, implemented on the FPGA, is capable of detecting pedestrians from image frames. captured using the camera.
\item The machine learning model's processing latency is one second or less.

\end{enumerate}

\subsubsection{Base Station}
\begin{enumerate}[{F.BS}.1:]
    \item Ground station displays the video data overlaid with the ML model data.
	\item ML model data is presented in the form of bounding boxes.
\end{enumerate}

\section{Non-Functional Requirements}\label{section:nonfuncrec}

TODO: We might have to split non-functional requirements into nf-reqs and constraints (the capstone docs say they're separate, but PC's don't).





\subsection{Multirotor RPAS}
\begin{enumerate}[{NF.FP}.1:]
    \item Drone has at least 50\% flight duration of that without the payload --- 10 minutes minimum.
    \item The drone must be able to fly in fair conditions (assuming no rain, heavy winds, etc.).
    \item The drone should be capable of auto-leveling, drift-correction, and perform emergency landing.
    \item The drone should have systems for low-battery alarm and emergency protocol for low-battery and loss of control radio.
\end{enumerate}

\subsection{Computing Platform}
\begin{enumerate}[{NF.CP}.1:]
	\item Computing Platform must be capable of performing a power-on self-test (POST) to ensure communications and video links are established
	\item Computing Platform must keep its configuration across flight sessions, including if the battery has been detached
\end{enumerate}

\subsection{System Reliability and Durability}
\begin{enumerate}[{NF.SR}.1:]
    \item Brushless DC Motors used on the drone should have a life span of 10,000 flight-hours.
    \item Non-computation-platform electronics are expected to have a life span of 20,000 flight hours if the procedures are followed correctly
    \item The lithium polymer battery for the drone is expected to retain 75\% of its charge after 200 charge/discharge cycles. (TODO: make citation \url{http://learningrc.com/lipo-battery/}) 
\end{enumerate}

\section{Contraints}

Constraints are not part of functional or non-function specifications.

\subsection{Cost}
\begin{enumerate}[{C.CT}.1:]
    \item Total cost of the project should be below C\$1,000, with C\$650 provided by the Capstone course as a backup.
    \item Operating cost of the integrated drone system upon completion should be practically free (non-including electricity cost, cost of time and labour, opportunity cost of the client, and cost for transportation).
\end{enumerate}

\subsection{Platform Extensibility}
\begin{enumerate}[{C.PE}.1:]
    \item FPGA must contain at least 60,000 logic elements to provide sufficient on-chip capacity for initial and future machine learning implementations.
    \item No more than 10,000 logic elements may be reserved for glue logic.
    \item I/O ports utilized on the Computing Platform must not be proprietary, to facilitate future board replacement.
    \item Development software used to synthesize the Computing Platform's hardware and software must be licensed and/or free-to-use, in perpetuity.
\end{enumerate}

\subsection{Legal Compliance}
\begin{enumerate}[{C.LG}.1:]
    \item Drone is in compliance with Transport Canada's new laws (TC 15263) with regards to small remote-piloted-aerial-systems (RPAS); effective as of June 1st, 2019.
    \item Provided drone documentation is in compliance with Transport Canada's regulations regarding drone manufacturers; documentation include safety, pre-flight, radio, operation, post-flight, and emergency procedures for the drone.
    \item Drone is not over 25kg and will not fly over bystanders (anyone that is not actively participating in the flight operation) or within 30m of them.
    \item Drone will not fly within 3 nautical miles of any aerodrome.
    \item Drone will not fly over 400ft; and not fly in controlled airspaces: class A, class B, class C, class D, class E, and class F.
    \item Drone will only fly in fair weather conditions with adequate visibility for line-of-sight operations.
    \item Drone will not carry weapons and cannot be used or modified for weaponization.
\end{enumerate}

\subsection{Power Requirements}
\begin{enumerate}[{C.EN}.1:]
    \item The power supply must be able to output both 5V and 12V
    \item The power supply must be able to output at least 2A to the 5V system and 1A to the 12V system
    \item The power supply system should have overvoltage, undervoltage, surge and reverse polarity protection
    \item The power supply must be capable of supporting at least 10 minutes of continuous operation

\end{enumerate}

\subsection{Environmental Considerations}
\begin{enumerate}[{C.EN}.1:]
    \item Include a recycling plan for environmentally impactful components (i.e. LiPo batteries)
    \item Components must be RoHS compliant
    \item Drone must not be flown into areas from which it could not be recovered in the even of a failure (i.e. over deep water)

\end{enumerate}

\subsection{Manegeability}
\begin{enumerate}[{C.EN}.1:]
    \item The battery must easily disconnect from the drone in order to enable easy charging
    \item The ground station must be able to easily connect to the drone
    \item It must be possible to connect to the FPGA and to synthesize hardware without removing it from the drone


\end{enumerate}

\subsection{Documents}
\begin{enumerate}[{C.EN}.1:]
    \item  The system must be accompanied by an operations manual describing procedures relating to; Safety, Operations and Maintenance


\end{enumerate}

% Bibliography
\clearpage
\addcontentsline{toc}{section}{References}
\bibliographystyle{ieeetr}
\bibliography{references}

% Appendix (uncomment to enable appendix)
% \clearpage
% \appendix
% \section{Appendix name}\label{appendix:sample-appendix}
% Content here

\end{document}
